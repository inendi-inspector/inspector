{
  "app-id": "com.esi_inendi.Inspector",
  "branch": "master",
  "runtime": "org.freedesktop.Platform",
  "runtime-version": "1.6",
  "sdk": "org.freedesktop.Sdk",
  "sdk-extensions": [ "org.freedesktop.Sdk.Extension.gcc8", "org.freedesktop.Sdk.Extension.golang" ],
  "command": "inspector_launcher.sh",
  "rename-desktop-file" : "inendi-inspector.desktop",
  "rename-icon" : "inendi-inspector",
  "cleanup-commands": [
    "rm -rf /app/include /app/etc /app/sbin/ /app/lib/*.a /app/lib/*.la /app/examples /app/doc /app/mkspecs",
    "cd /app/share && ls -I inendi -I pocl -I doc -I applications -I icons | xargs rm -rf",
    "cd /app/share/applications && ls -I inendi-inspector.desktop | xargs rm -rf",
    "cd /app/share/doc && ls -I inendi-inspector | xargs rm -rf",
    "cd /app/lib && find . -maxdepth 1 -type d -not -name . -not -name inendi-inspector -not -name debug -not -name clang -exec rm -rf {} +",
    "cd /app/bin && ls -I run_cmd.sh -I inspector_launcher.sh -I inendi-inspector -I inendi-crashreport -I inendi-logstats -I inendi-echoid -I inendi-lsinit -I ld -I lld -I ld.lld -I clang-4.0 -I clang -I clang++ -I pwgen -I tshark -I lbzip2 -I lbunzip2 -I pigz -I unpigz |xargs rm -rf",
    "cp /usr/lib/libbfd-2.27.0.20160806.so /usr/lib/crtn.o /usr/lib/crti.o /usr/lib/libmvec_nonshared.a /usr/lib/x86_64-unknown-linux/6.4.0/libgcc.a /usr/lib/x86_64-unknown-linux/6.4.0/crtbeginS.o /usr/lib/x86_64-unknown-linux/6.4.0/crtendS.o /app/lib",
    "ln -s /usr/lib/libc.so.6 /app/lib/libc.so && cp /usr/lib/sdk/gcc8/lib/libgcc_s.so.1 /app/lib && ln -s /app/lib/libgcc_s.so.1 /app/lib/libgcc_s.so && cp /usr/lib/sdk/gcc8/lib/libstdc++.so.6 /app/lib && ln -s /app/lib/libstdc++.so.6 /app/lib/libstdc++.so"
  ],
  "finish-args": [
    "--socket=x11",
    "--socket=wayland",
    "--share=network",
    "--filesystem=host",
    "--filesystem=/opt/inendi",
    "--filesystem=~/.inendi",
    "--filesystem=/tmp",
    "--device=all"
  ],
  "modules": [
    {
      "name": "gtest",
      "buildsystem": "cmake",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/google/googletest/archive/release-1.8.0.tar.gz",
          "sha256": "58a6f4277ca2bc8565222b3bbd58a177609e9c488e8a72649359ba51450db7d8"
        }
      ]
    },
    {
      "name": "libgpgerror",
      "sources": [
        {
          "type": "archive",
          "url": "https://www.gnupg.org/ftp/gcrypt/libgpg-error/libgpg-error-1.27.tar.bz2",
          "sha256": "4f93aac6fecb7da2b92871bb9ee33032be6a87b174f54abf8ddf0911a22d29d2"
        }
      ]
    },
    {
      "name": "libgcrypt",
      "sources": [
        {
          "type": "archive",
          "url": "https://www.gnupg.org/ftp/gcrypt/libgcrypt/libgcrypt-1.8.2.tar.bz2",
          "sha256": "c8064cae7558144b13ef0eb87093412380efa16c4ee30ad12ecb54886a524c07"
        }
      ]
    },
    {
      "name": "pigz",
      "sources": [
        {
          "type": "archive",
          "url": "https://zlib.net/pigz/pigz-2.4.tar.gz",
          "sha256": "a4f816222a7b4269bd232680590b579ccc72591f1bb5adafcd7208ca77e14f73"
        },
        {
          "type": "file",
          "path": "pigz-configure",
          "dest-filename": "configure"
        }
      ]
    },
    {
      "name": "lbzip2",
      "sources": [
        {
          "type": "archive",
          "url": "http://archive.lbzip2.org/lbzip2-2.5.tar.bz2",
          "sha256": "eec4ff08376090494fa3710649b73e5412c3687b4b9b758c93f73aa7be27555b"
        }
      ]
    },
    {
      "name": "gperftools",
      "config-opts": [
        "--enable-minimal"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/gperftools/gperftools/archive/gperftools-2.6.3.tar.gz",
          "sha256": "0c067fbef016daea0ff5c73135444624bf6efa89662c1537e54dad7a2b037c1b"
        }
      ]
    },
    {
      "name": "libhwloc",
      "sources": [
        {
          "type": "archive",
          "url": "https://www.open-mpi.org/software/hwloc/v1.11/downloads/hwloc-1.11.8.tar.bz2",
          "sha256": "ecef10265084d9123dc0b03d82ff5ee06fbf5ba755a912e7511ae590c9ee594d"
        }
      ]
    },
    {
      "name": "pwgen",
      "sources": [
        {
          "type": "archive",
          "url": "http://http.debian.net/debian/pool/main/p/pwgen/pwgen_2.07.orig.tar.gz",
          "sha256": "eb74593f58296c21c71cd07933e070492e9222b79cedf81d1a02ce09c0e11556"
        }
      ]
    },
    {
      "name": "mm-common",
      "config-opts": [
        "--disable-documentation"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/mm-common/0.9/mm-common-0.9.10.tar.xz",
          "sha256": "16c0e2bc196b67fbc145edaecb5dbe5818386504fe5703de27002d77140fa217"
        }
      ]
    },
    {
      "name": "libsigcplusplus",
      "config-opts": [
        "--disable-documentation"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/libsigc++/2.10/libsigc++-2.10.0.tar.xz",
          "sha256": "f843d6346260bfcb4426259e314512b99e296e8ca241d771d21ac64f28298d81"
        }
      ]
    },
    {
      "name": "rapidjson",
      "buildsystem": "cmake",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/Tencent/rapidjson/archive/v1.1.0.tar.gz",
          "sha256": "bf7ced29704a1e696fbccf2a2b4ea068e7774fa37f6d7dd4039d0787f8bed98e"
        }
      ]
    },
    {
      "name": "libnuma",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/numactl/numactl/archive/v2.0.11.tar.gz",
          "sha256": "3e099a59b2c527bcdbddd34e1952ca87462d2cef4c93da9b0bc03f02903f7089"
        }
      ]
    },
    {
      "name": "asciidoc",
      "sources": [
        {
          "type": "archive",
          "url": "https://freefr.dl.sourceforge.net/project/asciidoc/asciidoc/8.6.9/asciidoc-8.6.9.tar.gz",
          "sha256": "78db9d0567c8ab6570a6eff7ffdf84eadd91f2dfc0a92a2d0105d323cab4e1f0"
        }
      ]
    },
    {
      "name": "breakpad",
      "builddir": true,
      "subdir": "breakpad/src",
      "build-options": {
        "build-args": [
          "--share=network"
        ]
      },
      "sources": [
        {
          "type": "git",
          "url": "https://chromium.googlesource.com/chromium/tools/depot_tools.git",
          "commit": "da669d61230a10f71a13703889a97827db35ffd9"
        },
        {
          "type": "shell",
          "commands": [
            "mkdir breakpad && cd breakpad && ../fetch --no-history breakpad && cd src"
          ]
        }
      ]
    },
    {
      "name": "opencl",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/OCL-dev/ocl-icd/archive/v2.2.12.tar.gz",
          "sha256": "17500e5788304eef5b52dbe784cec197bdae64e05eecf38317840d2d05484272"
        }
      ]
    },
    {
      "name": "llvm",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "build-options": {
        "arch": {
          "x86_64": {
            "config-opts": [
              "-DLLVM_TARGETS_TO_BUILD=X86;NVPTX"
            ]
          }
        }
      },
      "config-opts": [
        "-GNinja",
        "-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DBUILD_SHARED_LIBS:BOOL=ON",
        "-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON",
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DLLVM_LIBDIR_SUFFIX=",
        "-DLLVM_ENABLE_LIBCXX:BOOL=OFF",
        "-DLLVM_ENABLE_ZLIB:BOOL=ON",
        "-DLLVM_ENABLE_FFI:BOOL=ON",
        "-DLLVM_ENABLE_RTTI:BOOL=ON",
        "-DLLVM_BUILD_RUNTIME:BOOL=ON",
        "-DLLVM_INCLUDE_TOOLS:BOOL=ON",
        "-DLLVM_BUILD_TOOLS:BOOL=ON",
        "-DLLVM_INCLUDE_TESTS:BOOL=OFF",
        "-DLLVM_BUILD_TESTS:BOOL=OFF",
        "-DLLVM_INCLUDE_EXAMPLES:BOOL=OFF",
        "-DLLVM_BUILD_EXAMPLES:BOOL=OFF",
        "-DLLVM_INCLUDE_UTILS:BOOL=ON",
        "-DLLVM_INSTALL_UTILS:BOOL=OFF",
        "-DLLVM_INCLUDE_DOCS:BOOL=OFF",
        "-DLLVM_BUILD_DOCS:BOOL=OFF",
        "-DLLVM_ENABLE_SPHINX:BOOL=OFF",
        "-DLLVM_ENABLE_DOXYGEN:BOOL=OFF",
        "-DLLVM_BUILD_LLVM_DYLIB:BOOL=OFF",
        "-DLLVM_BUILD_EXTERNAL_COMPILER_RT:BOOL=ON",
        "-DFFI_INCLUDE_DIR=/usr/lib/libffi-3.2.1/include",
        "-DLLVM_INSTALL_TOOLCHAIN_ONLY:BOOL=OFF"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://releases.llvm.org/4.0.1/llvm-4.0.1.src.tar.xz",
          "sha256": "da783db1f82d516791179fe103c71706046561f7972b18f0049242dee6712b51"
        }
      ]
    },
    {
      "name": "clang",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "build-options": {
        "cflags": "-g1",
        "cxxflags": "-g1"
      },
      "config-opts": [
        "-GNinja",
        "-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DBUILD_SHARED_LIBS:BOOL=ON",
        "-DCMAKE_VERBOSE_MAKEFILE:BOOL=ON",
        "-DCMAKE_BUILD_TYPE=RelWithDebInfo",
        "-DLLVM_CONFIG:FILEPATH=/app/bin/llvm-config",
        "-DCLANG_ENABLE_ARCMT:BOOL=ON",
        "-DCLANG_ENABLE_STATIC_ANALYZER:BOOL=ON",
        "-DCLANG_INCLUDE_DOCS:BOOL=OFF",
        "-DCLANG_INCLUDE_TESTS:BOOL=OFF",
        "-DCLANG_PLUGIN_SUPPORT:BOOL=ON",
        "-DCLANG_BUILD_EXAMPLES:BOOL=OFF"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://releases.llvm.org/4.0.1/cfe-4.0.1.src.tar.xz",
          "sha256": "61738a735852c23c3bdbe52d035488cdb2083013f384d67c1ba36fabebd8769b"
        }
      ]
    },
    {
      "name": "lld",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "config-opts": [
        "-GNinja",
        "-DCMAKE_C_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DCMAKE_CXX_FLAGS_RELEASE:STRING=-DNDEBUG",
        "-DCMAKE_BUILD_TYPE=Release",
        "-DLLVM_CONFIG:FILEPATH=/app/bin/llvm-config"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "http://releases.llvm.org/4.0.1/lld-4.0.1.src.tar.xz",
          "sha256": "63ce10e533276ca353941ce5ab5cc8e8dcd99dbdd9c4fa49f344a212f29d36ed"
        }
      ]
    },
    {
      "name": "portablecl",
      "buildsystem": "cmake",
      "config-opts": [
        "-DWITH_LLVM_CONFIG=/app/bin/llvm-config",
        "-DEXTRA_HOST_LD_FLAGS=-L/app/lib",
        "-DLINK_COMMAND=/app/bin/ld.lld",
        "-DLLC_HOST_CPU=corei7"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/pocl/pocl/archive/v1.1.tar.gz",
          "sha256": "1e8dd0693a88c84937754df947b202871a40545b1b0a97ebefa370b0281c3c53"
        }
      ]
    },
    {
      "name": "libpcap",
      "sources": [
        {
          "type": "archive",
          "url": "https://www.tcpdump.org/release/libpcap-1.9.0.tar.gz",
          "sha256": "2edb88808e5913fdaa8e9c1fcaf272e19b2485338742b5074b9fe44d68f37019"
        }
      ]
    },
    {
      "name": "c-ares",
      "sources": [
        {
          "type": "archive",
          "url": "https://c-ares.haxx.se/download/c-ares-1.15.0.tar.gz",
          "sha256": "6cdb97871f2930530c97deb7cf5c8fa4be5a0b02c7cea6e7c7667672a39d6852"
        }
      ]
    },
    {
      "name": "libmaxminddb",
      "config-opts": [
        "--disable-tests"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/maxmind/libmaxminddb/archive/1.3.2.tar.gz",
          "sha256": "c0785521c7e5515f1169db90ed6e51bc2a5a000377d0fbad87e4d5a791a6e364"
        }
      ]
    },
    {
      "name": "tshark",
      "buildsystem": "cmake",
      "config-opts": [
        "-DBUILD_wireshark=0"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.wireshark.org/download/src/wireshark-3.0.3.tar.xz",
          "sha256": "af92729c781d870110885c31ebcbe4c4224ed51bb580d00c896fe9746994211c"
        }
      ]
    },
    {
      "name": "tbb",
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/01org/tbb/archive/2018_U5.tar.gz",
          "sha256": "c4c2896af527392496c5e01ef8579058a71b6eebbd695924cd138841c13f07be"
        },
        {
          "type": "file",
          "path": "no-configure",
          "dest-filename": "configure"
        },
        {
          "type": "patch",
          "path": "tbb_makefile.patch"
        }
      ]
    },
    {
      "name": "boost",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://netcologne.dl.sourceforge.net/project/boost/boost/1.59.0/boost_1_59_0.tar.bz2",
          "sha256": "727a932322d94287b62abb1bd2d41723eec4356a7728909e38adb65ca25241ca"
        },
        {
          "type": "file",
          "path": "boost-configure",
          "dest-filename": "configure"
        }
      ]
    },
    {
      "name":"mysql",
      "buildsystem": "cmake",
      "config-opts": [
        "-DWITHOUT_SERVER=ON",
        "-DWITH_UNIT_TESTS=OFF"
      ],
      "builddir": true,
      "sources": [
        {
          "type": "archive",
          "url": "http://ftp.debian.org/debian/pool/main/m/mysql-5.7/mysql-5.7_5.7.23.orig.tar.gz",
          "sha256": "d05700ec5c1c6dae9311059dc1713206c29597f09dbd237bf0679b3c6438e87a"
        },
        {
          "type": "shell",
          "commands": [ "sed -i '641d' CMakeLists.txt", "# Fix serverless build, see https://bugs.mysql.com/bug.php?id=87348" ]
        }
      ]
    },
    {
      "name": "openssl",
      "buildsystem": "simple",
      "build-commands": [
          "./config --openssldir=/etc/ssl --prefix=/app shared threads && make -j $(nproc) && make install_sw"
       ],
      "sources": [
       {
          "type": "git",
          "url": "https://github.com/openssl/openssl",
          "commit": "74b9ce2d84a5feb36e391fc179fef16a058665e2"
        }
      ]
    },
    {
      "name": "qt5",
      "build-options": {
        "env": {
          "OPENSSL_LIBS": "-L/app/lib -lssl -lcrypto"
        }
      },
      "config-opts": [
        "-confirm-license",
        "-opensource",
        "-release",
        "-openssl-linked",
        "-sql-mysql",
        "-sql-sqlite",
        "-platform", "linux-g++",
        "-opengl", "es2",
        "-opengles3",
        "-optimized-qmake",
        "-nomake", "examples",
        "-nomake", "tests",
        "-accessibility",
        "-dbus-linked",
        "-fontconfig",
        "-glib",
        "-system-proxies",
        "-skip", "qtwebengine",
        "-gtk"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.qt.io/archive/qt/5.13/5.13.0/single/qt-everywhere-src-5.13.0.tar.xz",
          "sha256": "2cba31e410e169bd5cdae159f839640e672532a4687ea0f265f686421e0e86d6"
        },
        {
          "type": "patch",
          "path": "qt5_patches/inendi/0001-Fix-rectangle-intersection-issue-because-of-floating.patch"
        },
        {
          "type": "patch",
          "path": "qt5_patches/inendi/0002-Permit-to-specify-a-default-QTransform-in-QGraphisSc.patch"
        },
        {
          "type": "patch",
          "path": "qt5_patches/inendi/xcbegl.patch"
        }
      ]
    },
    {
      "name": "nspr",
      "config-opts": [
        "--disable-debug",
        "--enable-optimize",
        "--enable-64bit"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://ftp.mozilla.org/pub/nspr/releases/v4.21/src/nspr-4.21.tar.gz",
          "sha256": "15ea32c7b100217b6e3193bc03e77f485d9bf7504051443ba9ce86d1c17c6b5a"
        },
        {
          "type": "shell",
          "commands": [ "mv nspr/* ." ]
        }
      ]
    },
    {
      "name": "nss",
      "buildsystem": "simple",
      "build-commands": [
          "cd nss && make -j1 BUILD_OPT=1 NSS_DISABLE_GTESTS=1 NSPR_INCLUDE_DIR=/app/include/nspr USE_SYSTEM_ZLIB=1 ZLIB_LIBS=-lz NSS_ENABLE_WERROR=0 USE_64=1",
          "./install.sh"
       ],
      "sources": [
        {
         "type": "archive",
         "url": "https://ftp.mozilla.org/pub/security/nss/releases/NSS_3_45_RTM/src/nss-3.45-with-nspr-4.21.tar.gz",
         "sha256": "fae11751100510d26f16a245f0db9a5b3d638ab28ce0bccd50d4314f7e526ba1"
        },
        {
          "type": "patch",
          "path": "nss-standalone.patch"
        },
        {
          "type": "file",
          "path": "nss-install.sh",
          "dest-filename": "install.sh"
        }
      ]
    },
    {
      "name": "qt5-webengine",
      "disabled": false,
      "buildsystem": "simple",
      "build-commands": [
          "qmake && make -j $(nproc) ; make -j $(nproc) && make install"
       ],
      "sources": [
       {
          "type": "archive",
          "url": "https://download.qt.io/official_releases/qt/5.13/5.13.0/submodules/qtwebengine-everywhere-src-5.13.0.tar.xz",
          "sha256": "e0af82ecee1ab41b6732697f667b98b7b0c53164bebcfaad8070e88b2e064efe"
        },
        {
          "type": "patch",
          "path": "qtwebengine-no-udev.patch"
        }
      ]
    },
    {
      "name": "extra-cmake-modules",
      "buildsystem": "cmake",
      "sources": [
       {
          "type": "git",
          "url": "https://anongit.kde.org/extra-cmake-modules.git",
          "commit": "5b5fec7ccbf0c42b15e9fac3c17b1362543aa0b3"
        }
      ]
    },
    {
      "name": "kitemmodels",
      "buildsystem": "cmake",
      "sources": [
       {
          "type": "git",
          "url": "https://anongit.kde.org/kitemmodels.git",
          "commit": "b55c6d90f393d29ed5830e3e39880c732f4c5ea6"
        }
      ]
    },
    {
      "name": "mbedtls",
      "buildsystem": "cmake",
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=Release",
        "-DUSE_SHARED_MBEDTLS_LIBRARY=On",
        "-DENABLE_TESTING=Off"
      ],
      "sources": [
       {
          "type": "archive",
          "url": " https://tls.mbed.org/download/mbedtls-2.16.2-apache.tgz",
          "sha256": "a6834fcd7b7e64b83dfaaa6ee695198cb5019a929b2806cb0162e049f98206a4"
        }
      ]
    },
    {
      "name": "open62541",
      "buildsystem": "cmake",
      "config-opts": [
        "-DUA_ENABLE_AMALGAMATION=ON",
        "-DUA_ENABLE_ENCRYPTION=ON",
        "-DUA_ENABLE_HISTORIZING=ON",
        "-DUA_ENABLE_EXPERIMENTAL_HISTORIZING=ON",
        "-DUA_ENABLE_JSON_ENCODING=ON",
        "-DBUILD_SHARED_LIBS=ON",
        "-DCMAKE_BUILD_TYPE=Release",
        "-DUA_LOGLEVEL=200"
      ],
      "sources": [
       {
          "type": "git",
          "url": "https://github.com/open62541/open62541.git",
          "commit": "b9a3d72a3a331417b2faa7aa5ac0d6b553811080"
        },
        {
          "type": "patch",
          "path": "open62541_history.patch"
        }
      ]
    },
    {
      "name": "qtopcua",
      "buildsystem": "simple",
      "build-commands": [
          "mkdir build && cd build && qmake .. DEFINES+=UA_ENABLE_ENCRYPTION -- -system-open62541 OPEN62541_PREFIX=/app MBEDTLS_PREFIX=/app && make -j $(nproc) && make install"
       ],
      "sources": [
       {
          "type": "git",
          "url": "https://code.qt.io/qt/qtopcua.git",
          "commit": "4e75905d01b6a8aac987613cd4798fff1126dd4a"
        },
        {
          "type": "patch",
          "path": "qtopcua_secure.patch"
        }
      ]
    },
    {
      "name": "inendi-inspector-doc",
      "build-options": {
        "env": {
          "DOCS": "documents/inendi_inspector_reference_manual",
          "INSTALLROOT": "/app/share/doc/inendi-inspector"
        }
      },
      "sources": [
        {
          "type": "git",
          "url": "ssh://git@gitlab.srv.picviz/picviz/inendi-inspector-manual.git",
          "commit" : "ee7fc1b8ce1ca4bb9486a30cd900272d0e6571bc"
        },
        {
          "type": "file",
          "path": "no-configure",
          "dest-filename": "configure"
        }
      ]
    },
    {
      "name": "cmake",
      "buildsystem": "simple",
      "build-commands": [
        "./bootstrap --parallel=$(nproc) --prefix=/app --docdir=share/doc/cmake && make -j $(nproc) && make install"
      ],
      "builddir": true,
      "config-opts": [
          "-DCMAKE_BUILD_TYPE=@@BUILD_TYPE@@",
          "-DENABLE_TESTING=OFF"
      ],
      "sources": [
          {
          "type": "archive",
          "url": "https://github.com/Kitware/CMake/releases/download/v3.14.3/cmake-3.14.3.tar.gz",
          "sha256": "215d0b64e81307182b29b63e562edf30b3875b834efdad09b3fcb5a7d2f4b632"
          }
      ]
    },
    {
        "name": "zlib",
        "sources": [
        {
          "type": "archive",
          "url": "https://www.zlib.net/zlib-1.2.11.tar.gz",
          "sha256": "c3e5e9fdd5004dcb542feda5ee4f0ff0744628baf8ed2dd5d66f8ca1197cb1a1"
        }
      ]
    },
    {
        "name": "hdf5",
        "buildsystem": "cmake-ninja",
        "builddir": true,
        "config-opts": [
            "-DCMAKE_BUILD_TYPE=@@BUILD_TYPE@@",
            "-DBUILD_SHARED_LIBS=1",
            "-DHDF5_ENABLE_Z_LIB_SUPPORT=1",
            "-DHDF5_BUILD_CPP_LIB=1",
            "-DALLOW_UNSUPPORTED=1",
            "-DHDF5_ENABLE_THREADSAFE=1"
        ],
        "sources": [
        {
          "type": "archive",
          "url": "https://support.hdfgroup.org/ftp/HDF5/releases/hdf5-1.8/hdf5-1.8.14/src/hdf5-1.8.14.tar.bz2",
          "sha256": "53722cb9f5977af2908f92fc1a3f8c597800a5cb448cfe5c75060d6335bb9bab"
        },
        {
          "type": "shell",
          "commands": [ "sed -i '18,20d' config/cmake/hdf5-config-version.cmake.in", "# Fix PACKAGE_FIND_VERSION_TWEAK var" ]
        }
        
        
      ]
    },
    {
        "name": "erf",
        "buildsystem": "cmake-ninja",
        "builddir": true,
        "config-opts": [
            "-DCMAKE_BUILD_TYPE=@@BUILD_TYPE@@",
            "-DERF_MULTI_PRECISION=0",
            "-DERF_DOUBLE_PRECISION=0",
            "-DERF_ENCRYPTION=0"
        ],
        "sources": [
        {
          "type": "git",
          "url": "ssh://git@gitlab.esi-group.com/io/erf.git",
          "commit": "050fcf346d5fa03407e952d1c22775a386df4369"
        }
      ]
    },
    {
      "name": "inendi-inspector",
      "buildsystem": "cmake-ninja",
      "builddir": true,
      "run-tests" : true,
      "test-rule" : "",
      "test-commands" : [ "ninja inspector_testsuite && run_cmd.sh ctest --output-on-failure --no-compress-output -T test -R INSPECTOR_TEST" ],
      "config-opts": [
        "-DCMAKE_BUILD_TYPE=@@BUILD_TYPE@@",
        "-DCMAKE_INSTALL_PREFIX=/app",
        "-DARCH_TYPE=corei7",
        "-DUSER_TARGET=@@USER_TARGET@@"
      ],
      "build-options" : {
        "env": {
            "CXX": "@@CXX_COMPILER@@"
        },
        "append-ld-library-path" : "/usr/lib/sdk/gcc8/lib",
        "test-args": [
          "--share=network",
          "--filesystem=host"
        ]
      },
      "sources": [
        {
          "type": "git",
          "path": "..",
          "disable-shallow-clone": true,
          "branch": "@@BRANCH_NAME@@"
        }
      ],
      "post-install": [
        "ln -s /usr/lib/libm.so.6 /app/lib/libm.so",
        "cp ../flatpak/run_cmd.sh /app/bin",
        "cp ../flatpak/inspector_launcher.sh /app/bin",
        "mkdir -p /app/share/applications && cp ../flatpak/inendi-inspector.desktop /app/share/applications"
      ]
    }
  ]
}
